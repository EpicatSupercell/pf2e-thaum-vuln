export const EXPLOIT_VULNERABILITY_ACTION_ID = "Compendium.pf2e.actionspf2e.fodJ3zuwQsYnBbtk";


export async function exploitVuln() {
	//grab the selected token and the targeted token
	let a = canvas.tokens.controlled;
	let targets = Array.from(game.user.targets);
	
	//check for exploit vulnerability on the actor
	const exploitVulnAction = a[0].actor.items.find(item => item.getFlag("core", "sourceId") === EXPLOIT_VULNERABILITY_ACTION_ID);
	if (!exploitVulnAction) {
		return ui.notifications.warn(`${a[0].name} does not have the ability to Exploit Vulnerability`);
	}
	
	//make sure we're only targeting one target and have the thaum selected
	if (a.length != 1){
		return ui.notifications.warn("Select one token with Exploit Vulnerability")
	}
	if (targets.length !== 1){
		return ui.notifications.warn("Target one creature to Exploit Vulnerability against.")
	}
	
	//set the first index in the array as the target
	const t = Array.from(game.user.targets)[0];
	
	//Exploit Vulnerability Effect/action
	await exploitVulnAction.toMessage();
}



	