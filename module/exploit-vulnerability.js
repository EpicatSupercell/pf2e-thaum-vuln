import {getControlledActorAndToken, getItem, getItemFromActor} from "../utils/utils.js";
export const EXPLOIT_VULNERABILITY_ACTION_ID = "Compendium.pf2e.actionspf2e.fodJ3zuwQsYnBbtk";


export async function exploitVuln() {
	//grab the selected token and the targeted token
	const { actor, token } = getControlledActorAndToken();
	let targets = Array.from(game.user.targets);
	
	//make sure we're only targeting one target and have the thaum selected
	if (a.length != 1){
		return ui.notifications.warn("Select one token with Exploit Vulnerability")
	};
	if (targets.length !== 1){
		return ui.notifications.warn("Target one creature to Exploit Vulnerability against.")
	};
	
	const expVulnAction = getItemFromActor(actor, EXPLOIT_VULNERABILITY_ACTION_ID);
	if (!expVulnAction){
		return ui.notifications.warn(`${token.name} does not have the Exploit Vulnerability action.`);
	}
	
	//set the first index in the array as the target
	const t = Array.from(game.user.targets)[0];
	console.log(t.actor.uuid);
}